# MilitaryHolidaysTvCalendar

Android TV-приложение на Kotlin с использованием Jetpack Compose для отображения военных праздников России.

## Описание

Приложение отображает полноэкранный календарь военных праздников с автоматическим обновлением фонового изображения в зависимости от текущей даты. Если сегодня военный праздник, показывается соответствующее изображение, иначе — флаг России по умолчанию.

## Функциональность

- ✅ Полноэкранное отображение
- ✅ Автоматическое обновление фонового изображения в зависимости от даты
- ✅ Отображение текущей даты в формате `dd.MM.yyyy` (левый верхний угол)
- ✅ Отображение текущего времени в формате `HH:mm:ss` (правый верхний угол)
- ✅ Обновление времени каждую секунду
- ✅ Автоматическая проверка праздников в полночь
- ✅ Работа в часовом поясе Москва (Europe/Moscow)
- ✅ Полностью автономная работа без сервера
- ✅ Поддержка Android TV / Leanback

## Технические характеристики

- **minSdk**: 23
- **targetSdk**: 34
- **compileSdk**: 35
- **Язык**: Kotlin
- **UI Framework**: Jetpack Compose (TV)
- **Архитектура**: MVVM-подобная с использованием Compose State

## Структура проекта

```
app/
├── src/
│   └── main/
│       ├── assets/
│       │   ├── holidays/
│       │   │   └── holidays.json          # JSON с праздниками
│       │   └── images/
│       │       ├── russia_flag.png        # Изображение по умолчанию
│       │       └── [другие изображения]   # Изображения праздников
│       ├── java/com/example/military_holidays_tv_calendar/
│       │   ├── MainActivity.kt            # Главная активность
│       │   ├── repository/
│       │   │   └── HolidayRepository.kt   # Репозиторий для работы с JSON
│       │   └── ui/
│       │       └── UiState.kt             # Состояние UI
│       └── AndroidManifest.xml
└── build.gradle.kts
```

## Важно перед запуском

⚠️ **Необходимо добавить изображение по умолчанию**: 
Поместите файл `russia_flag.png` в папку `app/src/main/assets/images/` перед запуском приложения. Без этого файла приложение не сможет отобразить фоновое изображение для непраздничных дней.

## Как запустить проект

### Предварительные требования

1. **Android Studio** (Hedgehog или новее)
2. **JDK 11** или выше
3. **Android SDK** с API уровня 23-35

### Шаги для запуска

1. Клонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd military-holidays-tv-calendar
   ```

2. Откройте проект в Android Studio:
   - File → Open → выберите папку проекта

3. Дождитесь синхронизации Gradle (Android Studio сделает это автоматически)

4. Подключите Android TV устройство или эмулятор:
   - Для эмулятора: Tools → Device Manager → Create Device → TV
   - Выберите устройство с Android TV (например, Android TV (1080p))

5. Запустите приложение:
   - Нажмите кнопку "Run" (▶) или `Shift + F10`
   - Выберите ваше TV устройство

## Как собрать APK

### Debug APK

```bash
./gradlew assembleDebug
```

APK будет находиться в: `app/build/outputs/apk/debug/app-debug.apk`

### Release APK

1. Настройте подпись приложения (опционально):
   - Создайте keystore файл
   - Добавьте конфигурацию в `app/build.gradle.kts`

2. Соберите release APK:
   ```bash
   ./gradlew assembleRelease
   ```

APK будет находиться в: `app/build/outputs/apk/release/app-release.apk`

### Установка APK на устройство

```bash
adb install app-debug.apk
```

## Как заменить изображения

### Добавление изображений праздников

1. Поместите изображения в папку `app/src/main/assets/images/`
2. Имя файла должно соответствовать значению в `holidays.json`
3. Рекомендуемый формат: PNG
4. Рекомендуемое разрешение: 1920x1080 (Full HD) или выше для лучшего качества на TV

### Замена изображения по умолчанию

1. Замените файл `app/src/main/assets/images/russia_flag.png`
2. Сохраните то же имя файла: `russia_flag.png`

### Пример структуры изображений

```
app/src/main/assets/images/
├── russia_flag.png                    # По умолчанию
├── victory_day.png                    # 09 мая
├── defender_of_fatherland_day.png     # 23 февраля
├── navy_day.png                       # 26 июня
└── ...                                # Другие праздники
```

## Как редактировать holidays.json

Файл `app/src/main/assets/holidays/holidays.json` содержит сопоставление дат и изображений.

### Формат файла

```json
{
  "MM-DD": "имя_файла.png",
  "02-23": "defender_of_fatherland_day.png",
  "05-09": "victory_day.png"
}
```

### Добавление нового праздника

1. Откройте `app/src/main/assets/holidays/holidays.json`
2. Добавьте новую запись в формате `"MM-DD": "имя_файла.png"`
3. Поместите соответствующее изображение в `app/src/main/assets/images/`
4. Пересоберите приложение

### Пример добавления праздника

```json
{
  "01-21": "engineer_troops_day.png",
  "12-31": "new_year_eve.png"  // Новый праздник
}
```

### Удаление праздника

Просто удалите соответствующую строку из JSON файла.

## Список военных праздников

Приложение включает следующие военные праздники (формат MM-DD):

- **Январь**: 21, 25, 27
- **Февраль**: 02, 08, 18, 23, 27
- **Март**: 19, 27
- **Апрель**: 01, 11, 12, 13, 15, 18
- **Май**: 07, 09, 13, 18, 21, 27, 28, 29
- **Июнь**: 01, 22, 26, 29
- **Июль**: 01, 07, 10, 17
- **Август**: 01, 02, 06, 09, 12, 23
- **Сентябрь**: 02, 03, 08, 11, 21
- **Октябрь**: 01, 04, 20, 27, 28
- **Ноябрь**: 04, 05, 07, 13, 19, 27
- **Декабрь**: 01, 03

Полный список с названиями праздников находится в `app/src/main/assets/holidays/holidays.json`.

## Оптимизация памяти

Приложение оптимизировано для работы на устройствах с ограниченными ресурсами (1 GB RAM):

- Кэширование загруженных изображений
- Минимальное использование зависимостей
- Эффективное обновление UI только при необходимости
- Использование десугаринга для java.time (совместимость с minSdk 23)

## Поддержка Android TV

Приложение настроено для работы на Android TV:

- Добавлен `CATEGORY_LEANBACK_LAUNCHER` в AndroidManifest
- Использованы компоненты Jetpack Compose TV
- Поддержка навигации с пульта ДУ

## Разработка

### Основные компоненты

- **HolidayRepository**: Загружает и парсит JSON из assets
- **UiState**: Хранит текущее состояние (дата, время, изображение)
- **MainActivity**: Главная активность с Compose UI
- **LaunchedEffect**: Корутина для обновления времени каждую секунду

### Логика обновления

1. Каждую секунду обновляется текущее время
2. При смене даты (в полночь) проверяется наличие праздника
3. Если праздник найден, загружается соответствующее изображение
4. Если праздника нет, показывается изображение по умолчанию

## Лицензия

Этот проект создан для образовательных целей.

## Контакты

Для вопросов и предложений создайте issue в репозитории.

